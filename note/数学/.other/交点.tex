* 交点

	\Proof	
		射线方程: $\.x(t) = \.o + t \.d$
		曲面方程: $f(\.x) = 0$
		交点: $f(\.o + t \.d) = 0$ 求解t即可. $t$即射线出发点与交点的距离.

	\Include
		* 射线、平面交点
			$
				dis &= \/{\.a^T \.o - b}{\.a^T \.d}
					&= \/{(\sum_{i=1}^{Dim} a_i o_i) - b}{\sum_{i=1}^{Dim} a_i d_i}  \tag{分量形式}
			$

			\Proof
				射线方程: $\.x(t) = \.o + t \.d$
				平面方程: $\.a^T \.x = b$
				交点: 
					$
					=> \.a^T (\.o + t \.d) - b &= 0
						t \.a^T \.d + (\.a^T \.o - b) &= 0
						t &= \/{\.a^T \.o - b}{\.a^T \.d}
							&= \/{(\sum_{i=1}^{Dim} a_i o_i) - b}{\sum_{i=1}^{Dim} a_i d_i}  \tag{分量形式}
					$
			* 
				* 射线、三角形交点
					\Proof
						射线: $P = O + t D$
						射线三角形交点:
						$
								O + t D &= (1 - u - v) V0 + u V1 + v V2
								[ -D  V1-V0  V2-V0] [ t  u  v ]' &= O - V0
								T &= O - V0	E1 = V1 - V0	E2 = V2 - V0
								[ -D  E1  E2 ] [ t  u  v ]' &= T
						$
						$
							t &= \/{| T  E1  E2|}{|-D  E1  E2|}
							u &= \/{|-D   T  E2|}{|-D  E1  E2|}
							v &= \/{|-D  E1  E2|}{|-D  E1  E2|}
						$
						$
							|a  b  c| &= a × b·c 
								&= -a × c·b  \tag{混合积公式}
							t &= \/{T × E1·E2}{D × E2·E1}
							u &= \/{D × E2· T}{D × E2·E1}
							v &= \/{T × E1· D}{D × E2·E1}
						$

				* 射线、圆交点
					\Note
						先与平面计算交点, 再看交点与圆心的距离是否小于半径.

				* 射线、平面图案交点
					\Note
						先与平面计算交点, 再看交点是否在图案内部.

		* 射线、球面交点
			$
				Δ &= b^2 - 4 a c
					&= (2 \.d^T (\.o - \.c))^2 - 4 (\.d^T \.d) ((\.o - \.c)^T (\.o - \.c) - R^2)
					&= 4 (\sum_{i=1}^{Dim} d_i (o_i - c_i))^2 - 4 (\sum_{i=1}^{Dim} d_i^2) ((\sum_{i=1}^{Dim} (o_i - c_i)^2) - R^2)  \tag{分量形式}
				\text{若$Δ≥0$有交点; 若$Δ<0$无交点.}
				dis &= \/{-b ± \sqrt{Δ}}{2a}
			$

			\Proof
				射线方程: $\.x(t) = \.o + t \.d$
				球方程: $||\.x - \.c||_2 - R = 0$
				交点: 
				$ 
					=> (\.x - \.c)^T (\.x - \.c) - R^2 &= 0
					=> (\.o + t \.d - \.c)^T (\.o + t \.d - \.c) - R^2 &= 0  \tag{相交，代入}
					=> t^2 (\.d^T \.d) + t (2 \.d^T (\.o - \.c)) + ((\.o - \.c)^T (\.o - \.c) - R^2) &= 0
				$

				$
					Δ &= b^2 - 4 a c
						&= (2 \.d^T (\.o - \.c))^2 - 4 (\.d^T \.d) ((\.o - \.c)^T (\.o - \.c) - R^2)
						&= 4 (\sum_{i=1}^{Dim} d_i (o_i - c_i))^2 - 4 (\sum_{i=1}^{Dim} d_i^2) ((\sum_{i=1}^{Dim} (o_i - c_i)^2) - R^2)  \tag{分量形式}
				$
				若$Δ≥0$有交点; 若$Δ<0$无交点.
				$t = \/{-b ± \sqrt{Δ}}{2a}$

		* 射线、椭球面交点
			$
				Δ &= b^2 - 4 a c
					&= (2 \.d^T P^{-1} (\.o - \.c))^2 - 4 (\.d^T P^{-1} \.d) ((\.o - \.c)^T P^{-1} (\.o - \.c) - 1)
			$
			若$Δ≥0$有交点; 若$Δ<0$无交点.
			$t = \/{-b ± \sqrt{Δ}}{2a}$

			\Proof
				射线方程: $\.x(t) = \.o + t \.d$
				球方程: $(\.x - \.c)^T P^{-1} (\.x - \.c) = 1$
				交点: 
				$
				=> (t \.d + (\.o - \.c))^T P^{-1} (t \.d + (\.o - \.c)) - 1 &= 0
					t^2 (\.d^T P^{-1} \.d) + t (2 \.d^T P^{-1} (\.o - \.c)) + ((\.o - \.c)^T P^{-1} (\.o - \.c) - 1) &= 0
				$

				$
					Δ &= b^2 - 4 a c
						&= (2 \.d^T P^{-1} (\.o - \.c))^2 - 4 (\.d^T P^{-1} \.d) ((\.o - \.c)^T P^{-1} (\.o - \.c) - 1)
				$
				若$Δ≥0$有交点; 若$Δ<0$无交点.
				$t = \/{-b ± \sqrt{Δ}}{2a}$

		* 射线、矩体交点
